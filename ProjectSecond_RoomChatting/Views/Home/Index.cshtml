@using ViewModels.Home;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewBag.avatar = Model.ProfileViewModel.ImgUrl;
}
@model IndexHomeVIewModel
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.css" integrity="sha512-DIW4FkYTOxjCqRt7oS9BFO+nVOwDL4bzukDyDtMO7crjUZhwpyrWBFroq+IqRe6VnJkTpRAS6nhDvf0w+wHmxg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<input type="hidden" id="inputEmailTmp" value="@Model.ProfileViewModel.Email"/>
<div class="sidebar-group left-sidebar chat_sidebar">

    <div id="chats" class="left-sidebar-wrap sidebar active slimscroll">
        <div class="slimscroll">

            <div class="left-chat-title d-flex justify-content-between align-items-center">
                <div class="chat-title">
                </div>
                <div class="add-section">
                    <ul>
                        <li class="list-inline-item dream_profile_menu" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Profile">
                            <a href="javascript:void(0)" class="btn btn-outline-light">
                                <i class="fas fa-user"></i>
                            </a>
                        </li>
                       @* <li><a href="group.html"><span class="material-icons">group</span></a></li>*@
                        <li><a href="#" data-bs-toggle="modal" data-bs-target="#add-user"><i class="fas fa-plus"></i></a></li>
                        <li><a href="#" data-bs-toggle="modal" data-bs-target="#join"><i class="fas fa-users"></i></a></li>

                    </ul>
                </div>
            </div>

            <div class="sidebar-body" id="chatsidebar">

                <div class="left-chat-title d-flex justify-content-between align-items-center ps-0 pe-0">
                    <div class="chat-title">
                        <h4>Recent Chats</h4>
                    </div>
                    <div class="add-section">
                        <a href="#"><i class="fas fa-edit"></i></a>
                    </div>
                </div>

                <ul class="user-list mt-2">
                    @if(Model.chatRooms.Count > 0)
                    {
                        foreach (var item in Model.chatRooms)
                        {
                            <li class="user-list-item">
                               <a href="/Home?chatid=@item.Id">
                                <div class="users-list-body">
                                    <div>
                                        <h5>@item.Name</h5>
                                        <p>It seems logical that the</p>
                                    </div>
                                    <div class="last-chat-time">
                                        <small class="text-muted">05 min</small>
                                        <div class="new-message-count">1</div>
                                    </div>
                                </div>
                                </a>
                            </li>
                        }
                    }                   
                    @*<li class="user-list-item">
                        <div>
                            <div class="avatar avatar-away">
                                <img src="assets/img/avatar/avatar-9.jpg" class="rounded-circle" alt="image">
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>Forest Kroch</h5>
                                <p>It seems logical that the</p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">05 min</small>
                                <div class="new-message-count">11</div>
                            </div>
                        </div>
                    </li>
                    <li class="user-list-item item-typing">
                        <div>
                            <div class="avatar avatar-online">
                                <img src="assets/img/avatar/avatar-10.jpg" class="rounded-circle" alt="image">
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>Regina Dickerson</h5>
                                <p>
                                    <span class="animate-typing-col">
                                        <span class="dot"></span>
                                        <span class="dot"></span>
                                        <span class="dot"></span>
                                    </span>
                                </p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">05 min</small>
                            </div>
                        </div>
                    </li>*@
                   @* <li class="user-list-item">
                        <div>
                            <div class="avatar avatar-online">
                                <div class="letter-avatar">
                                    M
                                </div>
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>Townsend Seary</h5>
                                <p><span class="material-icons">insert_photo</span> Photo</p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">45 min</small>
                            </div>
                        </div>
                    </li>
                    <li class="user-list-item">
                        <div>
                            <div class="avatar avatar-online">
                                <img src="assets/img/avatar/avatar-11.jpg" class="rounded-circle" alt="image">
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>Margaretta Worvell</h5>
                                <p class="missed-call-col"><span class="material-icons">call_missed</span> Missed Call</p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">52 min</small>
                            </div>
                        </div>
                    </li>
                    <li class="user-list-item">
                        <div>
                            <div class="avatar avatar-away">
                                <img src="assets/img/avatar/avatar-2.jpg" class="rounded-circle" alt="image">
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>#Tech Support</h5>
                                <p><strong>Haidar</strong> : Hi!!!</p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">Yesterday</small>
                                <div class="new-message-count">11</div>
                            </div>
                        </div>
                    </li>
                    <li class="user-list-item">
                        <div>
                            <div class="avatar avatar-online">
                                <div class="letter-avatar">
                                    A
                                </div>
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>Harald Kowalski</h5>
                                <p><span class="material-icons">videocam</span> It seems logical that the</p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">Yesterday</small>
                            </div>
                        </div>
                    </li>
                    <li class="user-list-item">
                        <div>
                            <div class="avatar avatar-away">
                                <img src="assets/img/avatar/avatar-12.jpg" class="rounded-circle" alt="image">
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>Alexandr Donnelly</h5>
                                <p><span class="material-icons">settings_voice</span> 0.25</p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">Yesterday</small>
                            </div>
                        </div>
                    </li>
                    <li class="user-list-item">
                        <div>
                            <div class="avatar avatar-online">
                                <img src="assets/img/avatar/avatar-4.jpg" class="rounded-circle" alt="image">
                            </div>
                        </div>
                        <div class="users-list-body">
                            <div>
                                <h5>Regina Dickerson</h5>
                                <p>It seems logical that the</p>
                            </div>
                            <div class="last-chat-time">
                                <small class="text-muted">Yesterday</small>
                            </div>
                        </div>
                    </li>*@
                </ul>
            </div>
        </div>
    </div>

</div>

@if(Model.ChatDetailViewModel != null)
{
    <div class="chat" id="middle">
        <div class="slimscroll">
            <div class="chat-header">
                <div class="user-details">
                    <div class="d-lg-none ms-2">
                        <ul class="list-inline mt-2 me-2">
                            <li class="list-inline-item">
                                <a class="text-muted px-0 left_side" href="#" data-chat="open">
                                    <i class="fas fa-arrow-left"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <figure class="avatar ms-1">
                        <img src="assets/img/avatar/avatar-8.jpg" class="rounded-circle" alt="image">
                    </figure>
                    <div class="mt-1">
                        <h5>@Model.ChatDetailViewModel.ChatRoom.Name</h5>
                        @if (Model.ChatDetailViewModel.ChatRoom.IsPrivate)
                        {
                            <small class="online">Private</small>
                        }
                        @if (!Model.ChatDetailViewModel.ChatRoom.IsPrivate)
                        {
                            <small class="online">publish</small>
                        }
                    </div>
                </div>
                <div class="chat-options">
                    <ul class="list-inline">
                        @*  <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Search">
                    <a href="javascript:void(0)" class="btn btn-outline-light chat-search-btn">
                    <i class="fas fa-search"></i>
                    </a>
                    </li>*@
                          <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Search">
                    <a  class="btn btn-outline-light chat-search-btn">
                    <i class="fas fa-search"></i>
                    </a>
                    </li>
                        <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Voice call">
                            <a href="javascript:void(0)" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#voice_call">
                                <i class="fas fa-phone-alt voice_chat_phone"></i>
                            </a>
                        </li>
                        <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Video call">
                            <a href="javascript:void(0)" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#video_call">
                                <i class="fas fa-video"></i>
                            </a>
                        </li>

                        <li class="list-inline-item">
                            <a class="btn btn-outline-light no-bg" href="#" data-bs-toggle="dropdown">
                                <i class="fas fa-ellipsis-h"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a href="#" class="dropdown-item dream_profile_menu">Archive <span><i class="fas fa-archive"></i></span></a>
                                <a href="#" class="dropdown-item">Muted <span class="material-icons">volume_off</span></a>
                                <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="chat-search">
                    <form>
                        <span class="fas fa-search form-control-feedback"></span>
                        <input type="text" name="chat-search" placeholder="Search Chats" id="currentIdRoom" value="@ViewBag.CurrentChat" class="form-control">
                        <div class="close-btn-chat"><span class="material-icons">close</span></div>
                    </form>
                </div>

            </div>
            <div class="chat-body">
                <div id="messages" class="messages">
                    @if(Model.ChatDetailViewModel.messages != null && Model.ChatDetailViewModel.messages.Count > 0)
                    {
                       foreach (var item in Model.ChatDetailViewModel.messages)
                        {
                            if(item.Sender == ViewBag.sender)
                            {
                                <div class="chats chats-right">
                                    <div class="chat-content">
                                        <div class="message-content">
                                            @item.Messaget
                                            <div class="chat-time">
                                                <div>
                                                    <div class="time"><i class="fas fa-clock"></i> @item.DateTime</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-profile-name text-end">
                                            <h6>@item.SenderName</h6>
                                        </div>
                                    </div>
                                    <div class="chat-avatar">
                                        <img src="assets/img/avatar/avatar-12.jpg" class="rounded-circle dreams_chat" alt="image">
                                    </div>
                                    <div class="chat-action-btns me-2">
                                        <div class="chat-action-col">
                                            <a class="#" href="#" data-bs-toggle="dropdown">
                                                <i class="fas fa-ellipsis-h"></i>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-end">
                                                <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                                <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                                <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                                <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                            </div>
                                        </div>
                                        <div class="chat-read-col">
                                            <span class="material-icons">done_all</span>
                                        </div>
                                    </div>
                                </div>
                            }else{
                                <div class="chats">
                                    <div class="chat-avatar">
                                        <img src="assets/img/avatar/avatar-8.jpg" class="rounded-circle dreams_chat" alt="image">
                                    </div>
                                    <div class="chat-content">
                                        <div class="message-content">
                                            @item.Messaget
                                            <div class="chat-time">
                                                <div>
                                                    <div class="time"><i class="fas fa-clock"></i> @item.DateTime</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-profile-name">
                                            <h6>@item.SenderName</h6>
                                        </div>
                                    </div>
                                    <div class="chat-action-btns ms-3">
                                        <div class="chat-action-col">
                                            <a class="#" href="#" data-bs-toggle="dropdown">
                                                <i class="fas fa-ellipsis-h"></i>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-end">
                                                <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                                <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                                <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                                <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                    }
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <form id="FormchatAsync" asp-action="CreateMessage" asp-controller="Message" method="post">
                <div class="smile-col">
                    <a href="#"><i class="far fa-smile"></i></a>
                </div>
                <div class="attach-col">
                    <a href="#"><i class="fas fa-paperclip"></i></a>
                </div>
                <input type="hidden" id="idChatRoom" name="CreateMessageViewModel.chatId" value="@ViewBag.CurrentChat">
                <input id="chatMessage" type="text" asp-for="CreateMessageViewModel.Message" class="form-control chat_form" placeholder="Enter Message.....">
                <div class="form-buttons">
                    <button onclick="SendMessage()" class="btn send-btn" type="button">
                        <span class="material-icons">send</span>
                    </button>
                </div>
                <div class="specker-col">
                    <a href="#"><span class="material-icons">settings_voice</span></a>
                </div>
            </form>
        </div>
    </div>
}
else
{
    <div class="chat" id="middle">
        <div class="slimscroll">
            <div class="chat-header">
                <div class="user-details">
                    <div class="d-lg-none ms-2">
                        <ul class="list-inline mt-2 me-2">
                            <li class="list-inline-item">
                                <a class="text-muted px-0 left_side" href="#" data-chat="open">
                                    <i class="fas fa-arrow-left"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <figure class="avatar ms-1">
                        <img src="assets/img/avatar/avatar-8.jpg" class="rounded-circle" alt="image">
                    </figure>
                    <div class="mt-1">
                        <h5>hello</h5>
                        <small class="online">Hi</small>      
                    </div>
                </div>
                <div class="chat-options">
                    <ul class="list-inline">
                          <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Search">
                    <a href="javascript:void(0)" class="btn btn-outline-light chat-search-btn">
                    <i class="fas fa-search"></i>
                    </a>
                    </li>
                        <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Voice call">
                            <a href="javascript:void(0)" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#voice_call">
                                <i class="fas fa-phone-alt voice_chat_phone"></i>
                            </a>
                        </li>
                        <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Video call">
                            <a href="javascript:void(0)" class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#video_call">
                                <i class="fas fa-video"></i>
                            </a>
                        </li>

                        <li class="list-inline-item">
                            <a class="btn btn-outline-light no-bg" href="#" data-bs-toggle="dropdown">
                                <i class="fas fa-ellipsis-h"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a href="#" class="dropdown-item dream_profile_menu">Archive <span><i class="fas fa-archive"></i></span></a>
                                <a href="#" class="dropdown-item">Muted <span class="material-icons">volume_off</span></a>
                                <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="chat-search">
                    <form>
                        <span class="fas fa-search form-control-feedback"></span>
                        <input type="text" value="@ViewBag.CurrentChat" placeholder="Search Chats" class="form-control">
                        <div class="close-btn-chat"><span class="material-icons">close</span></div>
                    </form>
                </div>

            </div>
            <div class="chat-body">
                <div class="messages">
                    <div class="chats">
                        <div class="chat-avatar">
                            <img src="assets/img/avatar/avatar-8.jpg" class="rounded-circle dreams_chat" alt="image">
                        </div>
                        <div class="chat-content">
                            <div class="message-content">
                                Hi James! What’s Up?
                                <div class="chat-time">
                                    <div>
                                        <div class="time"><i class="fas fa-clock"></i> 10:00</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-profile-name">
                                <h6>Doris Brown</h6>
                            </div>
                        </div>
                        <div class="chat-action-btns ms-3">
                            <div class="chat-action-col">
                                <a class="#" href="#" data-bs-toggle="dropdown">
                                    <i class="fas fa-ellipsis-h"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                    <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                    <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                    <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chats chats-right">
                        <div class="chat-content">
                            <div class="message-content">
                                Good morning, How are you? What about our next meeting?
                                <div class="chat-time">
                                    <div>
                                        <div class="time"><i class="fas fa-clock"></i> 10:00</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-profile-name text-end">
                                <h6>Alexandr</h6>
                            </div>
                        </div>
                        <div class="chat-avatar">
                            <img src="assets/img/avatar/avatar-12.jpg" class="rounded-circle dreams_chat" alt="image">
                        </div>
                        <div class="chat-action-btns me-2">
                            <div class="chat-action-col">
                                <a class="#" href="#" data-bs-toggle="dropdown">
                                    <i class="fas fa-ellipsis-h"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                    <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                    <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                    <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                </div>
                            </div>
                            <div class="chat-read-col">
                                <span class="material-icons">done_all</span>
                            </div>
                        </div>
                    </div>
                    <div class="chats">
                        <div class="chat-avatar">
                            <img src="assets/img/avatar/avatar-8.jpg" class="rounded-circle dreams_chat" alt="image">
                        </div>
                        <div class="chat-content">
                            <div class="message-content">
                                & Next meeting tomorrow 10.00AM
                                <div class="chat-time">
                                    <div>
                                        <div class="time"><i class="fas fa-clock"></i> 10:06</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-profile-name">
                                <h6>Doris Brown</h6>
                            </div>
                        </div>
                        <div class="chat-action-btns ms-3">
                            <div class="chat-action-col">
                                <a class="#" href="#" data-bs-toggle="dropdown">
                                    <i class="fas fa-ellipsis-h"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                    <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                    <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                    <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chat-line">
                        <span class="chat-date">Today</span>
                    </div>
                    <div class="chats chats-right">
                        <div class="chat-content">
                            <div class="message-content">
                                Wow Thats Great
                                <div class="chat-time">
                                    <div>
                                        <div class="time"><i class="fas fa-clock"></i> 10:02</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-profile-name text-end">
                                <h6>Alexandr</h6>
                            </div>
                        </div>
                        <div class="chat-avatar">
                            <img src="assets/img/avatar/avatar-12.jpg" class="rounded-circle dreams_chat" alt="image">
                        </div>
                        <div class="chat-action-btns me-2">
                            <div class="chat-action-col">
                                <a class="#" href="#" data-bs-toggle="dropdown">
                                    <i class="fas fa-ellipsis-h"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                    <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                    <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                    <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                </div>
                            </div>
                            <div class="chat-read-col">
                                <span class="material-icons">done_all</span>
                            </div>
                        </div>
                    </div>
                    <div class="chats">
                        <div class="chat-avatar">
                            <img src="assets/img/avatar/avatar-8.jpg" class="rounded-circle dreams_chat" alt="image">
                        </div>
                        <div class="chat-content">
                            <div class="message-content">
                                <div class="download-col">
                                    <ul>
                                        <li>
                                            <div class="image-download-col">
                                                <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                    <img src="assets/img/chat-download.jpg" alt>
                                                </a>
                                                <div class="download-action d-flex align-items-center">
                                                    <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                    <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="image-download-col image-not-download">
                                                <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                    <img src="assets/img/chat-download.jpg" alt>
                                                </a>
                                                <div class="download-action d-flex align-items-center">
                                                    <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                    <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="image-download-col image-not-download">
                                                <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                    <img src="assets/img/chat-download.jpg" alt>
                                                </a>
                                                <div class="download-action d-flex align-items-center">
                                                    <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                    <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chat-time">
                                    <div>
                                        <div class="time"><i class="fas fa-clock"></i> 10:00</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-profile-name">
                                <h6>Doris Brown</h6>
                            </div>
                        </div>
                        <div class="chat-action-btns ms-3">
                            <div class="chat-action-col">
                                <a class="#" href="#" data-bs-toggle="dropdown">
                                    <i class="fas fa-ellipsis-h"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                    <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                    <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                    <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chats chats-right">
                        <div class="chat-content">
                            <div class="message-content">
                                <div class="file-download d-flex align-items-center">
                                    <div class="file-type d-flex align-items-center justify-content-center me-2">
                                        <i class="far fa-file-archive"></i>
                                    </div>
                                    <div class="file-details">
                                        <span class="file-name">filename.zip</span>
                                        <span class="file-size">10.6MB</span>
                                    </div>
                                    <div class="download-action d-flex align-items-center">
                                        <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                        <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                    </div>
                                </div>
                                <div class="chat-time">
                                    <div>
                                        <div class="time"><i class="fas fa-clock"></i> 10:02</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-profile-name text-end">
                                <h6>Alexandr</h6>
                            </div>
                        </div>
                        <div class="chat-avatar">
                            <img src="assets/img/avatar/avatar-12.jpg" class="rounded-circle dreams_chat" alt="image">
                        </div>
                        <div class="chat-action-btns me-2">
                            <div class="chat-action-col">
                                <a class="#" href="#" data-bs-toggle="dropdown">
                                    <i class="fas fa-ellipsis-h"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="#" class="dropdown-item dream_profile_menu">Copy <span><i class="far fa-copy"></i></span></a>
                                    <a href="#" class="dropdown-item">Save <span class="material-icons">save</span></a>
                                    <a href="#" class="dropdown-item">Forward <span><i class="fas fa-share"></i></span></a>
                                    <a href="#" class="dropdown-item">Delete <span><i class="far fa-trash-alt"></i></span></a>
                                </div>
                            </div>
                            <div class="chat-read-col">
                                <span class="material-icons">done_all</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="chat-footer">
            <form>
                <div class="smile-col">
                    <a href="#"><i class="far fa-smile"></i></a>
                </div>
                <div class="attach-col">
                    <a href="#"><i class="fas fa-paperclip"></i></a>
                </div>
                <input type="text" class="form-control chat_form" placeholder="Enter Message.....">
                <div class="form-buttons">
                    <button class="btn send-btn" type="submit">
                        <span class="material-icons">send</span>
                    </button>
                </div>
                <div class="specker-col">
                    <a href="#"><span class="material-icons">settings_voice</span></a>
                </div>
            </form>
        </div>
    </div>
}

<div class="right-sidebar right_sidebar_profile" id="middle1">
    <div class="right-sidebar-wrap active">
        <div class="slimscroll">
            <div class="left-chat-title d-flex justify-content-between align-items-center p-3">
                <div class="chat-title">
                    <h4>PROFILE</h4>
                </div>
                <div class="contact-close_call text-end">
                    <a href="#" class="close_profile close_profile4">
                        <span class="material-icons">close</span>
                    </a>
                </div>
            </div>
            <div class="sidebar-body">
                <div class="mt-0 right_sidebar_logo">
                    <div class="text-center mb-2 right-sidebar-profile">
                        <figure class="avatar avatar-xl mb-3">
                            <img src="@Model.ProfileViewModel.ImgUrl" class="rounded-circle" alt="image">
                        </figure>
                        <h5 class="profile-name">@Model.ProfileViewModel.Fullname</h5>
                        <div class="online-profile">
                            <span>online</span>
                        </div>
                    </div>
                    <div>
                        <div class="about-media-tabs">
                            <nav>
                                <div class="nav nav-tabs justify-content-center" id="nav-tab">
                                    <a class="nav-item nav-link active" id="nav-home-tab" data-bs-toggle="tab" href="#about">Infor</a>
                                   
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="about">
                                  
                                    <div class="member-details">
                                        <ul>
                                            <li>
                                                <h6>BirthDay</h6>
                                                <span>@Model.ProfileViewModel.birthday.ToString("dd/MM/yyyy")</span>
                                            </li>                                         
                                            <li>
                                                <h6>Email</h6>
                                                <span>@Model.ProfileViewModel.Email</span>
                                            </li>
                                        </ul>
                                    </div>
                                 
                                    
                                </div>
                                <div class="tab-pane fade" id="media">
                                    <div class="file-download-col">
                                        <ul>
                                            <li>
                                                <div class="image-download-col">
                                                    <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                        <img src="assets/img/chat-download.jpg" alt>
                                                    </a>
                                                    <div class="download-action d-flex align-items-center">
                                                        <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                        <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="image-download-col">
                                                    <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                        <img src="assets/img/chat-download.jpg" alt>
                                                    </a>
                                                    <div class="download-action d-flex align-items-center">
                                                        <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                        <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="image-download-col">
                                                    <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                        <img src="assets/img/chat-download.jpg" alt>
                                                    </a>
                                                    <div class="download-action d-flex align-items-center">
                                                        <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                        <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="image-download-col">
                                                    <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                        <img src="assets/img/chat-download.jpg" alt>
                                                    </a>
                                                    <div class="download-action d-flex align-items-center">
                                                        <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                        <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="image-download-col">
                                                    <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                        <img src="assets/img/chat-download.jpg" alt>
                                                    </a>
                                                    <div class="download-action d-flex align-items-center">
                                                        <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                        <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="image-download-col">
                                                    <a href="assets/img/chat-download.jpg" data-fancybox="gallery" class="fancybox">
                                                        <img src="assets/img/chat-download.jpg" alt>
                                                    </a>
                                                    <div class="download-action d-flex align-items-center">
                                                        <div><a href="#"><i class="fas fa-cloud-download-alt"></i></a></div>
                                                        <div><a href="#"><i class="fas fa-ellipsis-h"></i></a></div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="full-width text-center">
                                                <a href="#" class="load-more-btn">More 154 Files <i class="fas fa-sort-down"></i></a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
</div>
<div class="modal fade" id="add-user">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <span class="material-icons">person_add</span>Create Chat
                </h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="modal-body">

                <form asp-action="Create" asp-controller="Home" method="post">
                    <div class="form-group">
                        <label>Name Chatting</label>
                        <input class="form-control form-control-lg group_formcontrol" asp-for="CreateChatRoomViewModel.Name" type="text">
                    </div>
                    <div class="form-group">
                        <label>Key</label>
                        <input class="form-control form-control-lg group_formcontrol" asp-for="CreateChatRoomViewModel.serectKey" type="text">
                    </div>
                    <div class="form-group">
                        <div class="form-check">
                            <input asp-for="CreateChatRoomViewModel.IsPrivate" class="form-check-input" type="checkbox" id="flexCheckChecked" checked>
                            <label class="form-check-label" for="flexCheckChecked">
                                Checked checkbox
                            </label>
                        </div>
                        @*<label>Serect Chat</label>
                        <input class="form-control form-control-lg group_formcontrol" asp-for="CreateChatRoomViewModel.IsPrivate" type="checkbox">*@
                    </div>
                    <div class="form-row profile_form text-end float-end m-0 align-items-center">

                        <div class="cancel-btn me-4">
                            <a href="#" data-bs-dismiss="modal" aria-label="Close">Cancel</a>
                        </div>
                        <div>
                            <button id="testSubmit" type="submit" class="btn btn-block newgroup_create mb-0" data-bs-dismiss="modal">
                                Submit
                            </button>
                        </div>
                    </div>
                </form>

               
            </div>
        </div>
    </div>
</div>

@*join*@
<div class="modal fade" id="join">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <span class="material-icons">person_add</span>Join Chat Room
                </h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="modal-body">

                <form asp-action="JoinChatRoom" asp-controller="Chat" method="post">
                    <div class="form-group">
                        <label>Join Id</label>
                        <input asp-for="JoinChatViewModel.chatId" class="form-control form-control-lg group_formcontrol"  type="text">
                    </div>
                    <div class="form-group">
                        <label>Secrect Key</label>
                        <input asp-for="JoinChatViewModel.secrect" class="form-control form-control-lg group_formcontrol" type="text">
                    </div>
                   @* <div class="form-group">
                        <div class="form-check">
                            <input  class="form-check-input" type="checkbox" id="flexCheckChecked" checked>
                            <label class="form-check-label" for="flexCheckChecked">
                                Checked checkbox
                            </label>
                        </div>
                        
                    </div>*@
                    <div class="form-row profile_form text-end float-end m-0 align-items-center">

                        <div class="cancel-btn me-4">
                            <a href="#" data-bs-dismiss="modal" aria-label="Close">Cancel</a>
                        </div>
                        <div>
                            <button type="submit" class="btn btn-block newgroup_create mb-0" data-bs-dismiss="modal">
                                Submit
                            </button>
                        </div>
                    </div>
                </form>


            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="add-contact">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <span class="material-icons">person_add</span>Create Chat
                </h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="modal-body">

                <form action="https://dreamschat.dreamguystech.com/template-html/template2/new-friends">
                    <div class="form-group">
                        <label>Name</label>
                        <input class="form-control form-control-lg group_formcontrol" name="new-chat-title" type="text">
                    </div>
                    <div class="form-group">
                        <label>Nickname</label>
                        <input class="form-control form-control-lg group_formcontrol" name="new-chat-title" type="text">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input class="form-control form-control-lg group_formcontrol" name="new-chat-title" type="text">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input class="form-control form-control-lg group_formcontrol" name="new-chat-title" type="email">
                    </div>
                </form>

                <div class="form-row profile_form text-end float-end m-0 align-items-center">

                    <div class="cancel-btn me-4">
                        <a href="#" data-bs-dismiss="modal" aria-label="Close">Cancel</a>
                    </div>
                    <div class>
                        <button type="button" class="btn btn-block newgroup_create mb-0" data-bs-dismiss="modal" aria-label="Close">
                            Add to contacts
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="add-new-group">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <span class="material-icons group-add-btn">group_add</span>Create a New Group
                </h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="modal-body">

                <form action="https://dreamschat.dreamguystech.com/template-html/template2/new-friends">
                    <div class="form-group">
                        <label>Group Name</label>
                        <input class="form-control form-control-lg group_formcontrol" name="new-chat-title" type="text">
                    </div>
                    <div class="form-group">
                        <label>Choose profile picture</label>
                        <div class="custom-input-file form-control form-control-lg group_formcontrol">
                            <input type="file" class>
                            <span class="browse-btn">Browse File</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Topic (optional)</label>
                        <input class="form-control form-control-lg group_formcontrol" name="new-chat-title" type="text">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                    <textarea class="form-control form-control-lg group_formcontrol"></textarea>
                    </div>
                    <div class="form-group">
                        <div class="d-flex align-items-center">
                            <label class="custom-radio me-3">
                                Private Group
                                <input type="radio" checked="checked" name="radio">
                                <span class="checkmark"></span>
                            </label>
                            <label class="custom-radio">
                                Public Group
                                <input type="radio" name="radio">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                </form>

                <div class="form-row profile_form text-end float-end m-0 align-items-center">

                    <div class="cancel-btn me-4">
                        <a href="#" data-bs-dismiss="modal" aria-label="Close">Cancel</a>
                    </div>
                    <div class>
                        <button type="button" class="btn btn-block newgroup_create mb-0" data-bs-toggle="modal" data-bs-target="#add-group-member" data-bs-dismiss="modal" aria-label="Close">
                            Add Participants
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade custom-border-modal" id="add-group-member">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <span class="material-icons group-add-btn">group_add</span>Add Group Members
                </h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="search_chat has-search me-0 ms-0">
                    <span class="fas fa-search form-control-feedback"></span>
                    <input class="form-control chat_input" id="search-contact1" type="text" placeholder="Search Contacts">
                </div>
                <div class="sidebar">
                    <span class="contact-name-letter">A</span>
                    <ul class="user-list mt-2">
                        <li class="user-list-item">
                            <div class="avatar avatar-online">
                                <img src="assets/img/avatar/avatar-1.jpg" class="rounded-circle" alt="image">
                            </div>
                            <div class="users-list-body align-items-center">
                                <div>
                                    <h5>Albert Rodarte</h5>
                                </div>
                                <div class="last-chat-time">
                                    <label class="custom-check">
                                        <input type="checkbox" checked="checked">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div>
                        </li>
                        <li class="user-list-item">
                            <div class="avatar avatar-online">
                                <img src="assets/img/avatar/avatar-2.jpg" class="rounded-circle" alt="image">
                            </div>
                            <div class="users-list-body align-items-center">
                                <div>
                                    <h5>Allison Etter</h5>
                                </div>
                                <div class="last-chat-time">
                                    <label class="custom-check">
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <span class="contact-name-letter mt-3">C</span>
                    <ul class="user-list mt-2">
                        <li class="user-list-item">
                            <div class="avatar avatar-online">
                                <img src="assets/img/avatar/avatar-3.jpg" class="rounded-circle" alt="image">
                            </div>
                            <div class="users-list-body align-items-center">
                                <div>
                                    <h5>Craig Smiley</h5>
                                </div>
                                <div class="last-chat-time">
                                    <label class="custom-check">
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div>
                        </li>
                        <li class="user-list-item">
                            <div class="avatar avatar-online">
                                <img src="assets/img/avatar/avatar-4.jpg" class="rounded-circle" alt="image">
                            </div>
                            <div class="users-list-body align-items-center">
                                <div>
                                    <h5>Caniel Clay</h5>
                                </div>
                                <div class="last-chat-time">
                                    <label class="custom-check">
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="form-row profile_form text-end float-end m-0 mt-3 align-items-center">

                    <div class="cancel-btn me-3">
                        <a href="#" data-bs-dismiss="modal" aria-label="Close">Cancel</a>
                    </div>
                    <div class>
                        <button type="button" class="btn newgroup_create previous mb-0 me-3" data-bs-toggle="modal" data-bs-target="#add-new-group" data-bs-dismiss="modal" aria-label="Close">
                            Previous
                        </button>
                    </div>
                    <div class>
                        <button type="button" class="btn btn-block newgroup_create mb-0" data-bs-dismiss="modal" aria-label="Close">
                            Create Group
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="video_call" role="document">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content voice_content">
            <div class="modal-body voice_body">
                <div class="call-box incoming-box">
                    <div class="call-wrapper">
                        <div class="call-inner">
                            <div class="call-user">
                                <img alt="User Image" src="assets/img/avatar/avatar-8.jpg" class="call-avatar">
                                <h4>
                                    Brietta Blogg <span>video calling</span>
                                </h4>
                            </div>
                            <div class="call-items">
                                <a href="#" class="btn call-item call-end" data-bs-dismiss="modal">
                                    <span class="material-icons">close</span>
                                </a>
                                <a href="#" class="btn call-item call-start" data-bs-dismiss="modal">
                                    <i class="fas fa-video"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="voice_call" role="document">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content voice_content">
            <div class="modal-body voice_body">
                <div class="call-box incoming-box">
                    <div class="call-wrapper">
                        <div class="call-inner">
                            <div class="call-user">
                                <img alt="User Image" src="assets/img/avatar/avatar-8.jpg" class="call-avatar">
                                <h4>
                                    Brietta Blogg <span>voice calling</span>
                                </h4>
                            </div>
                            <div class="call-items">
                                <a href="#" class="btn call-item call-end" data-bs-dismiss="modal">
                                    <span class="material-icons">close</span>
                                </a>
                                <a href="#" class="btn call-item call-start" data-bs-dismiss="modal">
                                    <i class="fas fa-video"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
@section Scripts{
    @if (ViewBag.Error != null)
    {
        <script>
            iziToast.error({
                title: 'Error: ',
                message: '@ViewBag.Error',
                position: 'topRight'
            });
        </script>
    }
    @if (ViewBag.Success != null)
    {
        <script>
            iziToast.success({
                title: 'success:',
                message: '@ViewBag.Success',
                position: 'topRight'
            });
        </script>   
    }
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
    <script>
        var connection = new signalR.HubConnectionBuilder().withUrl("/chatHub").build();
        var accId = '@Model.ProfileViewModel.AccId';
        var currentRoom = document.getElementById("idChatRoom").value;
        connection.start().then(function () {            
            connection.invoke("SaveConnectId", accId);
            console.log("connected");
        });
        connection.on("ReciveMessage", function (message, email, currentChat, createDate) {
            if (currentChat == currentRoom) {
                console.log("test");
                document.getElementById("messages").innerHTML += "<div class='chats'><div class='chat-avatar'><img src='assets/img/avatar/avatar-8.jpg' class='rounded-circle dreams_chat' alt='image'></div><div class='chat-content'><div class='message-content'>" + message + "<div class='chat-time'><div><div class='time'><i class='fas fa-clock'></i>" + createDate + "</div></div></div></div><div class='chat-profile-name'><h6>" + email + "</h6></div> </div><div class='chat-action-btns ms-3'> <div class='chat-action-col'><a class='#' href='#' data-bs-toggle='dropdown'><i class='fas fa-ellipsis-h'></i></a><div class='dropdown-menu dropdown-menu-end'><a href='#' class='dropdown-item dream_profile_menu'>Copy <span><i class='far fa-copy'></i></span></a><a href='#' class='dropdown-item'>Save <span class='material-icons'>save</span></a> <a href='#' class='dropdown-item'>Forward <span><i class='fas fa-share'></i></span></a><a href='#' class='dropdown-item'>Delete <span><i class='far fa-trash-alt'></i></span></a></div></div></div></div>";
             }
        });

      async function SendMessage() {
            console.log('sended');
            var email = document.getElementById("inputEmailTmp").value;
            var message = document.getElementById("chatMessage").value;
            var currentChat = document.getElementById("currentIdRoom").value;
            var dateCurrent = new Date();
            var createDate = dateCurrent;
            var idRoom = document.getElementById("idChatRoom").value;
            connection.invoke("SendAll", message, email, currentChat, createDate);

            var form = document.getElementById("FormchatAsync");
            form.submit();
        }
    </script>
}

    